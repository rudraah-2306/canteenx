{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Rudraah/Desktop/Canteen/canteenx/frontend/pages/orders.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { useAuthStore } from '@/store';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport { Order } from '@/types';\r\nimport { motion } from 'framer-motion';\r\nimport { CheckCircle, Clock, AlertCircle, Package } from 'lucide-react';\r\n\r\nconst statusConfig = {\r\n  pending: { icon: Clock, color: 'text-yellow-500', bg: 'bg-yellow-50 dark:bg-yellow-900/30', label: 'Pending' },\r\n  confirmed: { icon: CheckCircle, color: 'text-blue-500', bg: 'bg-blue-50 dark:bg-blue-900/30', label: 'Confirmed' },\r\n  preparing: { icon: Package, color: 'text-orange-500', bg: 'bg-orange-50 dark:bg-orange-900/30', label: 'Preparing' },\r\n  ready: { icon: CheckCircle, color: 'text-green-500', bg: 'bg-green-50 dark:bg-green-900/30', label: 'Ready' },\r\n  completed: { icon: CheckCircle, color: 'text-accent-500', bg: 'bg-accent-50 dark:bg-accent-900/30', label: 'Completed' },\r\n  cancelled: { icon: AlertCircle, color: 'text-red-500', bg: 'bg-red-50 dark:bg-red-900/30', label: 'Cancelled' },\r\n};\r\n\r\nexport default function Orders() {\r\n  const router = useRouter();\r\n  const { user } = useAuthStore();\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n\r\n    const fetchOrders = async () => {\r\n      const { data, error } = await supabase\r\n        .from('orders')\r\n        .select('*')\r\n        .eq('user_id', user?.id)\r\n        .order('createdAt', { ascending: false });\r\n      if (error) {\r\n        console.error('Error fetching orders:', error.message);\r\n        setOrders([]);\r\n      } else {\r\n        setOrders(data || []);\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchOrders();\r\n  }, [user, router]);\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-950 dark:to-black py-12\">\r\n      <div className=\"container mx-auto\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5 }}\r\n        >\r\n          <h1 className=\"text-4xl font-bold mb-2\">My Orders</h1>\r\n          <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\r\n            Track and manage your food orders\r\n          </p>\r\n\r\n          {isLoading ? (\r\n            <div className=\"space-y-4\">\r\n              {[...Array(3)].map((_, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"card h-32 bg-gray-200 dark:bg-gray-800 animate-pulse\"\r\n                ></div>\r\n              ))}\r\n            </div>\r\n          ) : orders.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              {orders.map((order, i) => {\r\n                const config = statusConfig[order.status as keyof typeof statusConfig];\r\n                const StatusIcon = config.icon;\r\n\r\n                return (\r\n                  <motion.div\r\n                    key={order._id}\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: i * 0.05, duration: 0.3 }}\r\n                    className=\"card p-6 hover:shadow-soft-lg cursor-pointer\"\r\n                  >\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                      {/* Order Number and Items */}\r\n                      <div>\r\n                        <h3 className=\"text-lg font-bold mb-2\">\r\n                          Order #{order.orderNumber}\r\n                        </h3>\r\n                        <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\r\n                          {order.items.map((item) => (\r\n                            <div key={item.foodItem._id}>\r\n                              {item.quantity}x {item.foodItem.name}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Amount and Date */}\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\r\n                          Amount\r\n                        </p>\r\n                        <p className=\"text-2xl font-bold text-accent-600\">\r\n                          â‚¹{order.totalAmount}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                          {new Date(order.createdAt).toLocaleDateString()}\r\n                        </p>\r\n                      </div>\r\n\r\n                      {/* Status */}\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\r\n                          Status\r\n                        </p>\r\n                        <div\r\n                          className={`flex items-center gap-2 px-3 py-1 rounded-lg w-fit ${config.bg}`}\r\n                        >\r\n                          <StatusIcon className={`w-4 h-4 ${config.color}`} />\r\n                          <span className=\"font-semibold text-sm\">{config.label}</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Pickup Time */}\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\r\n                          Pickup Time\r\n                        </p>\r\n                        <p className=\"font-semibold\">\r\n                          {new Date(order.pickupTime).toLocaleTimeString([], {\r\n                            hour: '2-digit',\r\n                            minute: '2-digit',\r\n                          })}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                          {order.paymentMethod === 'cash'\r\n                            ? 'ðŸ’µ Cash'\r\n                            : 'ðŸ’³ Online'}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-20\">\r\n              <Package className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\r\n              <h2 className=\"text-3xl font-bold mb-2\">No orders yet</h2>\r\n              <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\r\n                Start ordering delicious food from the canteen\r\n              </p>\r\n              <button\r\n                onClick={() => router.push('/menu')}\r\n                className=\"btn btn-primary\"\r\n              >\r\n                Browse Menu\r\n              </button>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}